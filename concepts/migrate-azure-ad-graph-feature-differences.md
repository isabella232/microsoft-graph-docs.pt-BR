---
title: Diferenças de recursos entre o Azure AD Graph e o Microsoft Graph
description: Descreve as diferenças de recursos entre a API do Azure Active Directory (Azure AD) e a API do Microsoft Graph para ajudá-lo a migrar aplicativos de forma rápida e fácil.
author: dkershaw10
localization_priority: Normal
ms.prod: microsoft-identity-platform
ms.openlocfilehash: 0e18bc286f4373c15da9d6a2360491e1b2f0371f
ms.sourcegitcommit: b8d01acfc1cb7610a0e1f5c18065da415bae0777
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/06/2019
ms.locfileid: "33630241"
---
# <a name="feature-differences-between-azure-ad-graph-and-microsoft-graph"></a><span data-ttu-id="e5029-103">Diferenças de recursos entre o Azure AD Graph e o Microsoft Graph</span><span class="sxs-lookup"><span data-stu-id="e5029-103">Feature differences between Azure AD Graph and Microsoft Graph</span></span>

<span data-ttu-id="e5029-104">Este artigo faz parte da *etapa 1:* revisar as diferenças de API do [processo de migração de aplicativos](migrate-azure-ad-graph-planning-checklist.md).</span><span class="sxs-lookup"><span data-stu-id="e5029-104">This article is part of *step 1: review API differences* of the [process to migrate apps](migrate-azure-ad-graph-planning-checklist.md).</span></span>

<span data-ttu-id="e5029-105">Muitos recursos do Microsoft Graph funcionam de forma semelhante aos seus colegas do Azure AD Graph.</span><span class="sxs-lookup"><span data-stu-id="e5029-105">Many features in Microsoft Graph work similarly to their Azure AD Graph counterparts.</span></span> <span data-ttu-id="e5029-106">No entanto, alguns foram alterados e/ou aprimorados.</span><span class="sxs-lookup"><span data-stu-id="e5029-106">However, a few have been changed and/or improved.</span></span> <span data-ttu-id="e5029-107">Aqui, você aprenderá como adaptar seus aplicativos para aproveitar essas diferenças.</span><span class="sxs-lookup"><span data-stu-id="e5029-107">Here, you'll learn how to adapt your apps to take advantage of these differences.</span></span>  <span data-ttu-id="e5029-108">Frequentemente, as alterações são secundárias, mas vale a pena.</span><span class="sxs-lookup"><span data-stu-id="e5029-108">Frequently, the changes are minor, but well worth the effort.</span></span>

<span data-ttu-id="e5029-109">Este artigo explora como o Microsoft Graph trata:</span><span class="sxs-lookup"><span data-stu-id="e5029-109">This article explores how Microsoft Graph handles:</span></span>

- <span data-ttu-id="e5029-110">Extensões de esquema de diretório</span><span class="sxs-lookup"><span data-stu-id="e5029-110">Directory schema extensions</span></span>
- <span data-ttu-id="e5029-111">Consultas diferenciais</span><span class="sxs-lookup"><span data-stu-id="e5029-111">Differential queries</span></span>
- <span data-ttu-id="e5029-112">Envio em lote</span><span class="sxs-lookup"><span data-stu-id="e5029-112">Batching</span></span>

## <a name="directory-schema-extensions"></a><span data-ttu-id="e5029-113">Extensões de esquema de diretório</span><span class="sxs-lookup"><span data-stu-id="e5029-113">Directory schema extensions</span></span>

<span data-ttu-id="e5029-114">Se o aplicativo usar extensões de esquema de diretório do Azure AD Graph, você poderá continuar usando as mesmas APIs básicas (com as URLs de solicitação do Microsoft Graph) para:</span><span class="sxs-lookup"><span data-stu-id="e5029-114">If your app uses Azure AD Graph directory schema extensions, you can continue to use the same basic APIs (with Microsoft Graph request URLs) to:</span></span>

- <span data-ttu-id="e5029-115">Ler valores de extensão usando GET e`$select`</span><span class="sxs-lookup"><span data-stu-id="e5029-115">Read extension values using GET and `$select`</span></span>
- <span data-ttu-id="e5029-116">Pesquisar valores de extensão usando GET e`$filter`</span><span class="sxs-lookup"><span data-stu-id="e5029-116">Search on extension values using GET and `$filter`</span></span>
- <span data-ttu-id="e5029-117">Atualizar valores de extensão usando PATCH</span><span class="sxs-lookup"><span data-stu-id="e5029-117">Update extension values using PATCH</span></span>
- <span data-ttu-id="e5029-118">Remover valores de extensão usando PATCH (definido como **nulo**)</span><span class="sxs-lookup"><span data-stu-id="e5029-118">Remove extension values using PATCH (set to **null**)</span></span>

<span data-ttu-id="e5029-119">No entanto, o Microsoft Graph não oferece uma maneira de gerenciar as definições de extensão de esquema de diretório do Azure AD Graph ou para exibir todas as definições de extensão de esquema disponíveis em um locatário.</span><span class="sxs-lookup"><span data-stu-id="e5029-119">However, Microsoft Graph doesn't provide a way to manage Azure AD Graph directory schema extension definitions or to view all schema extension definitions available in a tenant.</span></span>

<span data-ttu-id="e5029-120">Em vez disso, o Microsoft Graph fornece uma experiência de desenvolvedor aprimorada de extensões de esquema, que atualmente não é compatível com as extensões de esquema de diretório do Azure AD Graph.</span><span class="sxs-lookup"><span data-stu-id="e5029-120">Instead, Microsoft Graph provides an enhanced schema extensions developer experience, which today is not backwards compatible with Azure AD Graph directory schema extentions.</span></span> <span data-ttu-id="e5029-121">Para saber mais, veja [extensões de esquema em adicionar dados personalizados](/graph/extensibility-overview#schema-extensions).</span><span class="sxs-lookup"><span data-stu-id="e5029-121">To learn more, see [schema extensions in add custom data](/graph/extensibility-overview#schema-extensions).</span></span>

### <a name="recommended-migration-approach"></a><span data-ttu-id="e5029-122">Abordagem de migração recomendada</span><span class="sxs-lookup"><span data-stu-id="e5029-122">Recommended migration approach</span></span>

<span data-ttu-id="e5029-123">Se seu aplicativo do Azure AD Graph usa extensões de esquema de diretório, faça uma abordagem incremental para migrar o aplicativo para o Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="e5029-123">If your Azure AD Graph app uses directory schema extensions, take an incremental approach to migrate the app to Microsoft Graph.</span></span>

<span data-ttu-id="e5029-124">Primeiro, alterne seu aplicativo para usar chamadas da API do Microsoft Graph, mas deixe que o aplicativo continue a aproveitar as extensões de esquema de diretório do Azure AD Graph.</span><span class="sxs-lookup"><span data-stu-id="e5029-124">First, switch your app to using Microsoft Graph API calls, but let the app continue to leverage Azure AD Graph directory schema extensions.</span></span>

<span data-ttu-id="e5029-125">Em seguida, você pode alternar para usar extensões de esquema do Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="e5029-125">Then, you can switch to using Microsoft Graph schema extensions.</span></span> <span data-ttu-id="e5029-126">Em alguns casos, a alternância não será apropriada.</span><span class="sxs-lookup"><span data-stu-id="e5029-126">In some cases, switching will not be appropriate.</span></span> <span data-ttu-id="e5029-127">Não alternar se:</span><span class="sxs-lookup"><span data-stu-id="e5029-127">Do not switch if:</span></span>

- <span data-ttu-id="e5029-128">Seu aplicativo usa extensões de esquema de diretório criadas por meio do AD Connect ou</span><span class="sxs-lookup"><span data-stu-id="e5029-128">Your app uses directory schema extensions created through AD Connect, or</span></span>
- <span data-ttu-id="e5029-129">Seu aplicativo depende dos valores de extensão do esquema de diretório nas declarações de token.</span><span class="sxs-lookup"><span data-stu-id="e5029-129">Your app relies on directory schema extension values in token claims.</span></span>

><span data-ttu-id="e5029-130">**Observação**: usar as propriedades de extensão de esquema do Microsoft Graph como declarações em um token usando declarações opcionais também não é suportada.</span><span class="sxs-lookup"><span data-stu-id="e5029-130">**NOTE**: Using Microsoft Graph schema extension properties as claims in a token using optional claims is also not yet supported.</span></span>

<span data-ttu-id="e5029-131">Para alternar para o modelo de extensão de esquema do Microsoft Graph mais recente, você precisará:</span><span class="sxs-lookup"><span data-stu-id="e5029-131">To switch to the newer Microsoft Graph schema extension model, you'll need to:</span></span>

- <span data-ttu-id="e5029-132">Definir novas definições de extensão de esquema usando o Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="e5029-132">Define new schema extension definitions using Microsoft Graph.</span></span>
- <span data-ttu-id="e5029-133">Atualize o aplicativo para dar suporte às novas definições de extensão de esquema.</span><span class="sxs-lookup"><span data-stu-id="e5029-133">Update the app to support the new schema extension definitions.</span></span>
- <span data-ttu-id="e5029-134">Migre os dados das propriedades de extensão de esquema do Azure AD para as novas propriedades de extensão de esquema do Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="e5029-134">Migrate the data from the Azure AD schema extension properties to the new Microsoft Graph schema extension properties.</span></span>  <span data-ttu-id="e5029-135">Não há suporte para a migração automática de dados.</span><span class="sxs-lookup"><span data-stu-id="e5029-135">Automatic migration of data is not supported.</span></span>

## <a name="differential-queries"></a><span data-ttu-id="e5029-136">Consultas diferenciais</span><span class="sxs-lookup"><span data-stu-id="e5029-136">Differential queries</span></span>

<span data-ttu-id="e5029-137">O Azure AD Graph e o Microsoft Graph permitem que você controle alterações usando consultas.</span><span class="sxs-lookup"><span data-stu-id="e5029-137">Azure AD Graph and Microsoft Graph let you track changes using queries.</span></span>  <span data-ttu-id="e5029-138">A abordagem de alto nível é semelhante entre as duas APIs, mas a sintaxe é diferente.</span><span class="sxs-lookup"><span data-stu-id="e5029-138">The high-level approach is similar between the two APIs, but the syntax is different.</span></span>  

<span data-ttu-id="e5029-139">O Azure AD Graph chama essas consultas diferenciais.</span><span class="sxs-lookup"><span data-stu-id="e5029-139">Azure AD Graph calls these differential queries.</span></span>  <span data-ttu-id="e5029-140">No Microsoft Graph, eles são [consultas Delta](/graph/delta-query-overview).</span><span class="sxs-lookup"><span data-stu-id="e5029-140">In Microsoft Graph, they're [delta queries](/graph/delta-query-overview).</span></span>

<span data-ttu-id="e5029-141">A tabela a seguir destaca as principais semelhanças e diferenças:</span><span class="sxs-lookup"><span data-stu-id="e5029-141">The following table highlights key similarities and differences:</span></span>

||<span data-ttu-id="e5029-142">Gráfico do Azure AD</span><span class="sxs-lookup"><span data-stu-id="e5029-142">Azure AD Graph</span></span> | <span data-ttu-id="e5029-143">Microsoft Graph</span><span class="sxs-lookup"><span data-stu-id="e5029-143">Microsoft Graph</span></span> |
|----|----|----|
| <span data-ttu-id="e5029-144">_Solicitação de dados inicial_</span><span class="sxs-lookup"><span data-stu-id="e5029-144">_Initial data request_</span></span> | <span data-ttu-id="e5029-145">Usa um parâmetro de consulta:</span><span class="sxs-lookup"><span data-stu-id="e5029-145">Uses a query parameter:</span></span><br>`GET /groups?deltaLink=` | <span data-ttu-id="e5029-146">O usa uma função:</span><span class="sxs-lookup"><span data-stu-id="e5029-146">Uses a function:</span></span> <br> `GET /groups/delta` |
| <span data-ttu-id="e5029-147">_Obter novas alterações_</span><span class="sxs-lookup"><span data-stu-id="e5029-147">_Get new changes_</span></span> | `GET /groups?deltaLink={deltaToken}` | `GET /groups/delta?$deltaToken={deltaToken}` |
| <span data-ttu-id="e5029-148">_Sincronizar a partir de agora_</span><span class="sxs-lookup"><span data-stu-id="e5029-148">_Sync from now_</span></span> |<span data-ttu-id="e5029-149">Usa um cabeçalho HTTP personalizado:</span><span class="sxs-lookup"><span data-stu-id="e5029-149">Uses a custom HTTP header:</span></span><br> `ocp-aad-dq-include-only-delta-token: true` | <span data-ttu-id="e5029-150">Usa um parâmetro de consulta:</span><span class="sxs-lookup"><span data-stu-id="e5029-150">Uses a query parameter:</span></span> <br> `GET /groups/delta?$deltaToken=latest` |
| <span data-ttu-id="e5029-151">_Controlar alterações para o directoryObjects_</span><span class="sxs-lookup"><span data-stu-id="e5029-151">_Track changes for directoryObjects_</span></span> | <span data-ttu-id="e5029-152">Obtém alterações para vários recursos (usuário e grupo) na mesma operação:&nbsp;&nbsp;</span><span class="sxs-lookup"><span data-stu-id="e5029-152">Gets changes for multiple resource (user and group) in the same operation:&nbsp;&nbsp;</span></span><br> `GET /directoryObject?$filter=isof('User') or isof('Group')&deltaLink=` | <span data-ttu-id="e5029-153">Usa consultas separadas com o Microsoft Graph, uma para cada recurso.</span><span class="sxs-lookup"><span data-stu-id="e5029-153">Uses separate queries with Microsoft Graph, one for each resource.</span></span> |
| <span data-ttu-id="e5029-154">_Obter alterações de recursos e relações_</span><span class="sxs-lookup"><span data-stu-id="e5029-154">_Get resource and relationship changes_</span></span> | <span data-ttu-id="e5029-155">Todas as solicitações retornam as alterações de recurso e relação, se o recurso tiver relações.</span><span class="sxs-lookup"><span data-stu-id="e5029-155">All requests return resource and relationship changes, if the resource has relationships.</span></span> | `GET /groups/delta?$expand=members` |
| <span data-ttu-id="e5029-156">_Resposta que indica itens novos e alterados_</span><span class="sxs-lookup"><span data-stu-id="e5029-156">_Response indicating new and changed items_</span></span> | <ul><li><p><span data-ttu-id="e5029-157">Representa instâncias recém-criadas usando sua representação padrão.</span><span class="sxs-lookup"><span data-stu-id="e5029-157">Represents newly created instances using their standard representation.</span></span></p></li><li><p><span data-ttu-id="e5029-158">As instâncias atualizadas são representadas por sua ID com *pelo menos* as propriedades que foram atualizadas.</span><span class="sxs-lookup"><span data-stu-id="e5029-158">Updated instances are represented by their id with *at least* the properties that have been updated.</span></span> <span data-ttu-id="e5029-159">Outras propriedades podem ser incluídas.</span><span class="sxs-lookup"><span data-stu-id="e5029-159">Other properties may be included.</span></span></p></li><li><p><span data-ttu-id="e5029-160">As relações são representadas `directoryLinkChange` como o tipo.</span><span class="sxs-lookup"><span data-stu-id="e5029-160">Relationships are represented as the `directoryLinkChange` type.</span></span></p></li></ul>|<ul><li><p><span data-ttu-id="e5029-161">Representa instâncias recém-criadas usando sua representação padrão.</span><span class="sxs-lookup"><span data-stu-id="e5029-161">Represents newly created instances using their standard representation.</span></span></p></li><li><p><span data-ttu-id="e5029-162">As instâncias atualizadas são representadas por sua ID com *pelo menos* as propriedades que foram atualizadas.</span><span class="sxs-lookup"><span data-stu-id="e5029-162">Updated instances are represented by their id with *at least* the properties that have been updated.</span></span> <span data-ttu-id="e5029-163">Outras propriedades podem ser incluídas.</span><span class="sxs-lookup"><span data-stu-id="e5029-163">Other properties may be included.</span></span></p></li><li><p><span data-ttu-id="e5029-164">As relações são representadas como anotações na representação de recursos padrão.</span><span class="sxs-lookup"><span data-stu-id="e5029-164">Relationships are represented as annotations on the standard resource representation.</span></span> <span data-ttu-id="e5029-165">Essas anotações usam o formato `propertyName@delta`, por exemplo `members@delta` , para as alterações de associação de um grupo.</span><span class="sxs-lookup"><span data-stu-id="e5029-165">These annotations use the format `propertyName@delta`, for example `members@delta` for a group's membership changes.</span></span></p></li></ul> |
| <span data-ttu-id="e5029-166">_Resposta indicando itens excluídos_</span><span class="sxs-lookup"><span data-stu-id="e5029-166">_Response indicating  deleted items_</span></span>| <span data-ttu-id="e5029-167">Indica um item excluído com uma propriedade adicional de *AAD.* IsDeleted definida como true.</span><span class="sxs-lookup"><span data-stu-id="e5029-167">Indicates a deleted item with an additional property of *aad.isDeleted* set to true.</span></span> | <span data-ttu-id="e5029-168">Indica um item excluído com a \@anotação removida.</span><span class="sxs-lookup"><span data-stu-id="e5029-168">Indicates a deleted item with the \@removed annotation.</span></span> <span data-ttu-id="e5029-169">Ele também pode conter um código de motivo, que indica se o item foi excluído, mas pode ser restaurado ou excluído permanentemente.</span><span class="sxs-lookup"><span data-stu-id="e5029-169">It may also contain a reason code, which indicates if the item is deleted, but can be restored, or is permanently deleted.</span></span> |

<span data-ttu-id="e5029-170">Se seu aplicativo já estiver armazenando dados de estado, considere o uso de "sincronizar a partir de agora" mostrado anteriormente para ajudar a gerenciar a transição para consultas Delta.</span><span class="sxs-lookup"><span data-stu-id="e5029-170">If your app is already storing state data, consider using the "sync from now" shown earlier to help manage the transition to delta queries.</span></span>

## <a name="batching"></a><span data-ttu-id="e5029-171">Envio em lote</span><span class="sxs-lookup"><span data-stu-id="e5029-171">Batching</span></span>

<span data-ttu-id="e5029-172">O Azure AD Graph usava um sistema chamado mensagens MIME de várias partes para gerenciar o envio em lote.</span><span class="sxs-lookup"><span data-stu-id="e5029-172">Azure AD Graph used a system called multi-part MIME messages to manage batching.</span></span>  <span data-ttu-id="e5029-173">O Microsoft Graph usa o [processamento em lotes JSON](json-batching.md) para permitir até 20 solicitações em uma única operação em lote.</span><span class="sxs-lookup"><span data-stu-id="e5029-173">Microsoft Graph uses [JSON batching](json-batching.md) to permit up to 20 requests in a single batch operation.</span></span> <span data-ttu-id="e5029-174">O mecanismo de lote JSON é muito mais simples de usar, especialmente em conjunto com as bibliotecas de análise JSON.</span><span class="sxs-lookup"><span data-stu-id="e5029-174">The JSON batching mechanism is significantly simpler to use, especially together with JSON parsing libraries.</span></span>  <span data-ttu-id="e5029-175">Também permite operações em lote de sequenciamento.</span><span class="sxs-lookup"><span data-stu-id="e5029-175">It also allows for sequencing batch operations.</span></span>  <span data-ttu-id="e5029-176">No entanto, não é compatível com versões anteriores da abordagem de lotes do Azure AD Graph.</span><span class="sxs-lookup"><span data-stu-id="e5029-176">However, it is not backwards compatible with the Azure AD Graph batching approach.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e5029-177">Próximos passos</span><span class="sxs-lookup"><span data-stu-id="e5029-177">Next Steps</span></span>

- <span data-ttu-id="e5029-178">Saiba mais sobre as [diferenças de recursos](migrate-azure-ad-graph-resource-differences.md) entre o Azure ad Graph e o Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="e5029-178">Learn about [resource differences](migrate-azure-ad-graph-resource-differences.md) between Azure AD Graph and Microsoft Graph.</span></span>
- <span data-ttu-id="e5029-179">Explore [Adicionar dados personalizados](/graph/extensibility-overview) para obter informações sobre as extensões abertas e de esquema.</span><span class="sxs-lookup"><span data-stu-id="e5029-179">Explore [add custom data](/graph/extensibility-overview) for information about open and schema extensions.</span></span>
- <span data-ttu-id="e5029-180">Explore as [consultas Delta](/graph/delta-query-overview) para saber mais sobre a versão do Microsoft Graph da consulta diferencial.</span><span class="sxs-lookup"><span data-stu-id="e5029-180">Explore [delta queries](/graph/delta-query-overview) to learn about Microsoft Graph's version of differential query.</span></span>
- <span data-ttu-id="e5029-181">Explore o [processamento em lotes JSON](json-batching.md) para entender como o processamento em lotes funciona no Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="e5029-181">Explore [JSON batching](json-batching.md) to understand how batching works in Microsoft Graph.</span></span>
- <span data-ttu-id="e5029-182">Use o [Explorador do Graph](https://aka.ms/ge) para experimentar o Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="e5029-182">Use [Graph Explorer](https://aka.ms/ge) to experiment with Microsoft Graph.</span></span>

<!-- {
  "type": "#page.annotation",
  "suppressions": [
    "Warning: /concepts/migrate-azure-ad-graph-feature-changes.md:
      Failed to parse any rows out of table with headers: |Task|Azure AD Graph|Microsoft Graph|"
  ],
}
-->
