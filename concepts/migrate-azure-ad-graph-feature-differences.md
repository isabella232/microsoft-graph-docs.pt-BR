---
title: Diferenças de recursos entre o Azure AD Graph e o Microsoft Graph
description: Descreve as diferenças de recursos entre a API do Azure Active Directory (Azure AD) e a API do Microsoft Graph para ajudá-lo a migrar aplicativos de forma rápida e fácil.
author: dkershaw10
localization_priority: Normal
ms.prod: microsoft-identity-platform
ms.openlocfilehash: 7bebb0437ac3f099d7518640ad4fbb0f9fd75990
ms.sourcegitcommit: b083a570375252eff8054f9fe70e1e5e2becc06d
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/23/2020
ms.locfileid: "44845775"
---
# <a name="feature-differences-between-azure-ad-graph-and-microsoft-graph"></a><span data-ttu-id="c3e28-103">Diferenças de recursos entre o Azure AD Graph e o Microsoft Graph</span><span class="sxs-lookup"><span data-stu-id="c3e28-103">Feature differences between Azure AD Graph and Microsoft Graph</span></span>

<span data-ttu-id="c3e28-104">Este artigo faz parte da *etapa 1: revisar as diferenças de API* do [processo de migração de aplicativos](migrate-azure-ad-graph-planning-checklist.md).</span><span class="sxs-lookup"><span data-stu-id="c3e28-104">This article is part of *step 1: review API differences* of the [process to migrate apps](migrate-azure-ad-graph-planning-checklist.md).</span></span>

<span data-ttu-id="c3e28-105">Muitos recursos do Microsoft Graph funcionam de forma semelhante aos seus colegas do Azure AD Graph.</span><span class="sxs-lookup"><span data-stu-id="c3e28-105">Many features in Microsoft Graph work similarly to their Azure AD Graph counterparts.</span></span> <span data-ttu-id="c3e28-106">No entanto, alguns foram alterados e/ou aprimorados.</span><span class="sxs-lookup"><span data-stu-id="c3e28-106">However, a few have been changed and/or improved.</span></span> <span data-ttu-id="c3e28-107">Aqui, você aprenderá como adaptar seus aplicativos para aproveitar essas diferenças.</span><span class="sxs-lookup"><span data-stu-id="c3e28-107">Here, you'll learn how to adapt your apps to take advantage of these differences.</span></span>  <span data-ttu-id="c3e28-108">Frequentemente, as alterações são secundárias, mas vale a pena.</span><span class="sxs-lookup"><span data-stu-id="c3e28-108">Frequently, the changes are minor, but well worth the effort.</span></span>

<span data-ttu-id="c3e28-109">Este artigo explora como o Microsoft Graph trata:</span><span class="sxs-lookup"><span data-stu-id="c3e28-109">This article explores how Microsoft Graph handles:</span></span>

- <span data-ttu-id="c3e28-110">Extensões de esquema de diretório</span><span class="sxs-lookup"><span data-stu-id="c3e28-110">Directory schema extensions</span></span>
- <span data-ttu-id="c3e28-111">Consultas diferenciais</span><span class="sxs-lookup"><span data-stu-id="c3e28-111">Differential queries</span></span>
- <span data-ttu-id="c3e28-112">Envio em lote</span><span class="sxs-lookup"><span data-stu-id="c3e28-112">Batching</span></span>

## <a name="directory-schema-extensions"></a><span data-ttu-id="c3e28-113">Extensões de esquema de diretório</span><span class="sxs-lookup"><span data-stu-id="c3e28-113">Directory schema extensions</span></span>

<span data-ttu-id="c3e28-114">Se o aplicativo usar extensões de esquema de diretório do Azure AD Graph, você poderá continuar usando as mesmas APIs básicas (com as URLs de solicitação do Microsoft Graph) para:</span><span class="sxs-lookup"><span data-stu-id="c3e28-114">If your app uses Azure AD Graph directory schema extensions, you can continue to use the same basic APIs (with Microsoft Graph request URLs) to:</span></span>

- <span data-ttu-id="c3e28-115">Gerenciar definições de propriedade de extensão usando a propriedade **extensionproperties** no recurso [Application] [/Graph/API/Resources/Application? View = Graph-REST-v 1.0).</span><span class="sxs-lookup"><span data-stu-id="c3e28-115">Manage extension property definitions using the **extensionProperties** property on the [application][/graph/api/resources/application?view=graph-rest-v1.0) resource.</span></span>
- <span data-ttu-id="c3e28-116">Ler valores de extensão usando GET e`$select`</span><span class="sxs-lookup"><span data-stu-id="c3e28-116">Read extension values using GET and `$select`</span></span>
- <span data-ttu-id="c3e28-117">Pesquisar valores de extensão usando GET e`$filter`</span><span class="sxs-lookup"><span data-stu-id="c3e28-117">Search on extension values using GET and `$filter`</span></span>
- <span data-ttu-id="c3e28-118">Atualizar valores de extensão usando PATCH</span><span class="sxs-lookup"><span data-stu-id="c3e28-118">Update extension values using PATCH</span></span>
- <span data-ttu-id="c3e28-119">Remover valores de extensão usando PATCH (definido como **nulo**)</span><span class="sxs-lookup"><span data-stu-id="c3e28-119">Remove extension values using PATCH (set to **null**)</span></span>

<span data-ttu-id="c3e28-120">O Microsoft Graph fornece uma experiência de desenvolvedor aprimorada de extensões de esquema, que hoje não é compatível com versões anteriores com extensões de esquema de diretório do Azure AD Graph.</span><span class="sxs-lookup"><span data-stu-id="c3e28-120">Microsoft Graph provides an enhanced schema extensions developer experience, which today is not backwards compatible with Azure AD Graph directory schema extentions.</span></span> <span data-ttu-id="c3e28-121">Para saber mais, veja [extensões de esquema em adicionar dados personalizados](/graph/extensibility-overview#schema-extensions).</span><span class="sxs-lookup"><span data-stu-id="c3e28-121">To learn more, see [schema extensions in add custom data](/graph/extensibility-overview#schema-extensions).</span></span>

### <a name="recommended-migration-approach"></a><span data-ttu-id="c3e28-122">Abordagem de migração recomendada</span><span class="sxs-lookup"><span data-stu-id="c3e28-122">Recommended migration approach</span></span>

<span data-ttu-id="c3e28-123">Se seu aplicativo do Azure AD Graph usa extensões de esquema de diretório, faça uma abordagem incremental para migrar o aplicativo para o Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="c3e28-123">If your Azure AD Graph app uses directory schema extensions, take an incremental approach to migrate the app to Microsoft Graph.</span></span>

<span data-ttu-id="c3e28-124">Primeiro, alterne seu aplicativo para usar chamadas da API do Microsoft Graph, mas deixe que o aplicativo continue a aproveitar as extensões de esquema de diretório do Azure AD Graph.</span><span class="sxs-lookup"><span data-stu-id="c3e28-124">First, switch your app to using Microsoft Graph API calls, but let the app continue to leverage Azure AD Graph directory schema extensions.</span></span>

<span data-ttu-id="c3e28-125">Em seguida, você pode alternar para usar extensões de esquema do Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="c3e28-125">Then, you can switch to using Microsoft Graph schema extensions.</span></span> <span data-ttu-id="c3e28-126">Em alguns casos, a alternância não será apropriada.</span><span class="sxs-lookup"><span data-stu-id="c3e28-126">In some cases, switching will not be appropriate.</span></span> <span data-ttu-id="c3e28-127">Não alternar se:</span><span class="sxs-lookup"><span data-stu-id="c3e28-127">Do not switch if:</span></span>

- <span data-ttu-id="c3e28-128">Seu aplicativo usa extensões de esquema de diretório criadas por meio do AD Connect ou</span><span class="sxs-lookup"><span data-stu-id="c3e28-128">Your app uses directory schema extensions created through AD Connect, or</span></span>
- <span data-ttu-id="c3e28-129">Seu aplicativo depende dos valores de extensão do esquema de diretório nas declarações de token.</span><span class="sxs-lookup"><span data-stu-id="c3e28-129">Your app relies on directory schema extension values in token claims.</span></span>

><span data-ttu-id="c3e28-130">**Observação**: o uso de propriedades de extensão de esquema do Microsoft Graph como declarações em um token que usa declarações opcionais ou em uma regra de associação dinâmica também não tem suporte.</span><span class="sxs-lookup"><span data-stu-id="c3e28-130">**NOTE**: Using Microsoft Graph schema extension properties as claims in a token using optional claims or in a dynamic membership rule is also not yet supported.</span></span>

<span data-ttu-id="c3e28-131">Para alternar para o modelo de extensão de esquema do Microsoft Graph mais recente, você precisará:</span><span class="sxs-lookup"><span data-stu-id="c3e28-131">To switch to the newer Microsoft Graph schema extension model, you'll need to:</span></span>

- <span data-ttu-id="c3e28-132">Definir novas definições de extensão de esquema usando o Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="c3e28-132">Define new schema extension definitions using Microsoft Graph.</span></span>
- <span data-ttu-id="c3e28-133">Atualize o aplicativo para dar suporte às novas definições de extensão de esquema.</span><span class="sxs-lookup"><span data-stu-id="c3e28-133">Update the app to support the new schema extension definitions.</span></span>
- <span data-ttu-id="c3e28-134">Migre os dados das propriedades de extensão de esquema do Azure AD para as novas propriedades de extensão de esquema do Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="c3e28-134">Migrate the data from the Azure AD schema extension properties to the new Microsoft Graph schema extension properties.</span></span>  <span data-ttu-id="c3e28-135">Não há suporte para a migração automática de dados.</span><span class="sxs-lookup"><span data-stu-id="c3e28-135">Automatic migration of data is not supported.</span></span>

## <a name="differential-queries"></a><span data-ttu-id="c3e28-136">Consultas diferenciais</span><span class="sxs-lookup"><span data-stu-id="c3e28-136">Differential queries</span></span>

<span data-ttu-id="c3e28-137">O Azure AD Graph e o Microsoft Graph permitem que você controle alterações usando consultas.</span><span class="sxs-lookup"><span data-stu-id="c3e28-137">Azure AD Graph and Microsoft Graph let you track changes using queries.</span></span>  <span data-ttu-id="c3e28-138">A abordagem de alto nível é semelhante entre as duas APIs, mas a sintaxe é diferente.</span><span class="sxs-lookup"><span data-stu-id="c3e28-138">The high-level approach is similar between the two APIs, but the syntax is different.</span></span>

<span data-ttu-id="c3e28-139">O Azure AD Graph chama essas consultas diferenciais.</span><span class="sxs-lookup"><span data-stu-id="c3e28-139">Azure AD Graph calls these differential queries.</span></span>  <span data-ttu-id="c3e28-140">No Microsoft Graph, eles são [consultas Delta](/graph/delta-query-overview).</span><span class="sxs-lookup"><span data-stu-id="c3e28-140">In Microsoft Graph, they're [delta queries](/graph/delta-query-overview).</span></span>

<span data-ttu-id="c3e28-141">A tabela a seguir destaca as principais semelhanças e diferenças:</span><span class="sxs-lookup"><span data-stu-id="c3e28-141">The following table highlights key similarities and differences:</span></span>

|<span data-ttu-id="c3e28-142">Solicitação Delta</span><span class="sxs-lookup"><span data-stu-id="c3e28-142">Delta request</span></span> |<span data-ttu-id="c3e28-143">Azure AD Graph.</span><span class="sxs-lookup"><span data-stu-id="c3e28-143">Azure AD Graph</span></span> | <span data-ttu-id="c3e28-144">Microsoft Graph</span><span class="sxs-lookup"><span data-stu-id="c3e28-144">Microsoft Graph</span></span> |
|----|----|----|
| <span data-ttu-id="c3e28-145">_Solicitação de dados inicial_</span><span class="sxs-lookup"><span data-stu-id="c3e28-145">_Initial data request_</span></span> | <span data-ttu-id="c3e28-146">Usa um parâmetro de consulta:</span><span class="sxs-lookup"><span data-stu-id="c3e28-146">Uses a query parameter:</span></span><br>`GET /groups?deltaLink=` | <span data-ttu-id="c3e28-147">O usa uma função:</span><span class="sxs-lookup"><span data-stu-id="c3e28-147">Uses a function:</span></span> <br> `GET /groups/delta` |
| <span data-ttu-id="c3e28-148">_Obter novas alterações_</span><span class="sxs-lookup"><span data-stu-id="c3e28-148">_Get new changes_</span></span> | `GET /groups?deltaLink={deltaToken}` | `GET /groups/delta?$deltaToken={deltaToken}` |
| <span data-ttu-id="c3e28-149">_Sincronizar a partir de agora_</span><span class="sxs-lookup"><span data-stu-id="c3e28-149">_Sync from now_</span></span> |<span data-ttu-id="c3e28-150">Usa um cabeçalho HTTP personalizado:</span><span class="sxs-lookup"><span data-stu-id="c3e28-150">Uses a custom HTTP header:</span></span><br> `ocp-aad-dq-include-only-delta-token: true` | <span data-ttu-id="c3e28-151">Usa um parâmetro de consulta:</span><span class="sxs-lookup"><span data-stu-id="c3e28-151">Uses a query parameter:</span></span> <br> `GET /groups/delta?$deltaToken=latest` |
| <span data-ttu-id="c3e28-152">_Controlar alterações para o directoryObjects_</span><span class="sxs-lookup"><span data-stu-id="c3e28-152">_Track changes for directoryObjects_</span></span> | <span data-ttu-id="c3e28-153">Obtém alterações para vários recursos (usuário e grupo) na mesma operação:&nbsp;&nbsp;</span><span class="sxs-lookup"><span data-stu-id="c3e28-153">Gets changes for multiple resource (user and group) in the same operation:&nbsp;&nbsp;</span></span><br> `GET /directoryObject?$filter=isof('User') or isof('Group')&deltaLink=` | <span data-ttu-id="c3e28-154">Usa consultas separadas com o Microsoft Graph, uma para cada recurso.</span><span class="sxs-lookup"><span data-stu-id="c3e28-154">Uses separate queries with Microsoft Graph, one for each resource.</span></span> |
| <span data-ttu-id="c3e28-155">_Obter alterações de recursos e relações_</span><span class="sxs-lookup"><span data-stu-id="c3e28-155">_Get resource and relationship changes_</span></span> | <span data-ttu-id="c3e28-156">Todas as solicitações retornam as alterações de recurso e relação, se o recurso tiver relações.</span><span class="sxs-lookup"><span data-stu-id="c3e28-156">All requests return resource and relationship changes, if the resource has relationships.</span></span> | `GET /groups/delta?$expand=members` |
| <span data-ttu-id="c3e28-157">_Resposta que indica itens novos e alterados_</span><span class="sxs-lookup"><span data-stu-id="c3e28-157">_Response indicating new and changed items_</span></span> | <ul><li><p><span data-ttu-id="c3e28-158">Representa instâncias recém-criadas usando sua representação padrão.</span><span class="sxs-lookup"><span data-stu-id="c3e28-158">Represents newly created instances using their standard representation.</span></span></p></li><li><p><span data-ttu-id="c3e28-159">As instâncias atualizadas são representadas por sua ID com *pelo menos* as propriedades que foram atualizadas.</span><span class="sxs-lookup"><span data-stu-id="c3e28-159">Updated instances are represented by their id with *at least* the properties that have been updated.</span></span> <span data-ttu-id="c3e28-160">Outras propriedades podem ser incluídas.</span><span class="sxs-lookup"><span data-stu-id="c3e28-160">Other properties may be included.</span></span></p></li><li><p><span data-ttu-id="c3e28-161">As relações são representadas como o `directoryLinkChange` tipo.</span><span class="sxs-lookup"><span data-stu-id="c3e28-161">Relationships are represented as the `directoryLinkChange` type.</span></span></p></li></ul>|<ul><li><p><span data-ttu-id="c3e28-162">Representa instâncias recém-criadas usando sua representação padrão.</span><span class="sxs-lookup"><span data-stu-id="c3e28-162">Represents newly created instances using their standard representation.</span></span></p></li><li><p><span data-ttu-id="c3e28-163">As instâncias atualizadas são representadas por sua ID com *pelo menos* as propriedades que foram atualizadas.</span><span class="sxs-lookup"><span data-stu-id="c3e28-163">Updated instances are represented by their id with *at least* the properties that have been updated.</span></span> <span data-ttu-id="c3e28-164">Outras propriedades podem ser incluídas.</span><span class="sxs-lookup"><span data-stu-id="c3e28-164">Other properties may be included.</span></span></p></li><li><p><span data-ttu-id="c3e28-165">As relações são representadas como anotações na representação de recursos padrão.</span><span class="sxs-lookup"><span data-stu-id="c3e28-165">Relationships are represented as annotations on the standard resource representation.</span></span> <span data-ttu-id="c3e28-166">Essas anotações usam o formato `propertyName@delta` , por exemplo, `members@delta` para as alterações de associação de um grupo.</span><span class="sxs-lookup"><span data-stu-id="c3e28-166">These annotations use the format `propertyName@delta`, for example `members@delta` for a group's membership changes.</span></span></p></li></ul> |
| <span data-ttu-id="c3e28-167">_Resposta indicando itens excluídos_</span><span class="sxs-lookup"><span data-stu-id="c3e28-167">_Response indicating  deleted items_</span></span>| <span data-ttu-id="c3e28-168">Indica um item excluído com uma propriedade adicional de *AAD. IsDeleted* definida como true.</span><span class="sxs-lookup"><span data-stu-id="c3e28-168">Indicates a deleted item with an additional property of *aad.isDeleted* set to true.</span></span> | <span data-ttu-id="c3e28-169">Indica um item excluído com a \@ anotação removida.</span><span class="sxs-lookup"><span data-stu-id="c3e28-169">Indicates a deleted item with the \@removed annotation.</span></span> <span data-ttu-id="c3e28-170">Ele também pode conter um código de motivo, que indica se o item foi excluído, mas pode ser restaurado ou excluído permanentemente.</span><span class="sxs-lookup"><span data-stu-id="c3e28-170">It may also contain a reason code, which indicates if the item is deleted, but can be restored, or is permanently deleted.</span></span> |

<span data-ttu-id="c3e28-171">Se seu aplicativo já estiver armazenando dados de estado, considere o uso de "sincronizar a partir de agora" mostrado anteriormente para ajudar a gerenciar a transição para consultas Delta.</span><span class="sxs-lookup"><span data-stu-id="c3e28-171">If your app is already storing state data, consider using the "sync from now" shown earlier to help manage the transition to delta queries.</span></span>

## <a name="batching"></a><span data-ttu-id="c3e28-172">Envio em lote</span><span class="sxs-lookup"><span data-stu-id="c3e28-172">Batching</span></span>

<span data-ttu-id="c3e28-173">O Azure AD Graph usava um sistema chamado mensagens MIME de várias partes para gerenciar o envio em lote.</span><span class="sxs-lookup"><span data-stu-id="c3e28-173">Azure AD Graph used a system called multi-part MIME messages to manage batching.</span></span>  <span data-ttu-id="c3e28-174">O Microsoft Graph usa o [processamento em lotes JSON](json-batching.md) para permitir até 20 solicitações em uma única operação em lote.</span><span class="sxs-lookup"><span data-stu-id="c3e28-174">Microsoft Graph uses [JSON batching](json-batching.md) to permit up to 20 requests in a single batch operation.</span></span> <span data-ttu-id="c3e28-175">O mecanismo de lote JSON é muito mais simples de usar, especialmente em conjunto com as bibliotecas de análise JSON.</span><span class="sxs-lookup"><span data-stu-id="c3e28-175">The JSON batching mechanism is significantly simpler to use, especially together with JSON parsing libraries.</span></span>  <span data-ttu-id="c3e28-176">Também permite operações em lote de sequenciamento.</span><span class="sxs-lookup"><span data-stu-id="c3e28-176">It also allows for sequencing batch operations.</span></span>  <span data-ttu-id="c3e28-177">No entanto, não é compatível com versões anteriores da abordagem de lotes do Azure AD Graph.</span><span class="sxs-lookup"><span data-stu-id="c3e28-177">However, it is not backwards compatible with the Azure AD Graph batching approach.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c3e28-178">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="c3e28-178">Next Steps</span></span>

- <span data-ttu-id="c3e28-179">Saiba mais sobre as [diferenças de recursos](migrate-azure-ad-graph-resource-differences.md) entre o Azure ad Graph e o Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="c3e28-179">Learn about [resource differences](migrate-azure-ad-graph-resource-differences.md) between Azure AD Graph and Microsoft Graph.</span></span>
- <span data-ttu-id="c3e28-180">Explore [Adicionar dados personalizados](/graph/extensibility-overview) para obter informações sobre as extensões abertas e de esquema.</span><span class="sxs-lookup"><span data-stu-id="c3e28-180">Explore [add custom data](/graph/extensibility-overview) for information about open and schema extensions.</span></span>
- <span data-ttu-id="c3e28-181">Explore as [consultas Delta](/graph/delta-query-overview) para saber mais sobre a versão do Microsoft Graph da consulta diferencial.</span><span class="sxs-lookup"><span data-stu-id="c3e28-181">Explore [delta queries](/graph/delta-query-overview) to learn about Microsoft Graph's version of differential query.</span></span>
- <span data-ttu-id="c3e28-182">Explore o [processamento em lotes JSON](json-batching.md) para entender como o processamento em lotes funciona no Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="c3e28-182">Explore [JSON batching](json-batching.md) to understand how batching works in Microsoft Graph.</span></span>
- <span data-ttu-id="c3e28-183">Use o [Explorador do Graph](https://aka.ms/ge) para experimentar o Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="c3e28-183">Use [Graph Explorer](https://aka.ms/ge) to experiment with Microsoft Graph.</span></span>

<!-- {
  "type": "#page.annotation",
  "suppressions": [
    "Warning: /concepts/migrate-azure-ad-graph-feature-changes.md:
      Failed to parse any rows out of table with headers: |Task|Azure AD Graph|Microsoft Graph|"
  ],
}
-->
