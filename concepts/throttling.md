# <a name="microsoft-graph-throttling-guidance"></a><span data-ttu-id="31a8e-101">Diretrizes de limitação do Microsoft Graph</span><span class="sxs-lookup"><span data-stu-id="31a8e-101">Microsoft Graph throttling guidance</span></span>


<span data-ttu-id="31a8e-p101">Os limites de controle limitam número de chamadas simultâneas para um serviço para evitar a utilização exagerada dos recursos. O Microsoft Graph foi projetado para lidar com um alto volume de solicitações. Se ocorrer um número impressionante de solicitações, a limitação ajuda a manter um desempenho ideal e a confiabilidade do serviço Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="31a8e-p101">Throttling limits the number of concurrent calls to a service to prevent overuse of resources. Microsoft Graph is designed to handle a high volume of requests. If an overwhelming number of requests occurs, throttling helps maintain optimal performance and reliability of the Microsoft Graph service.</span></span>

<span data-ttu-id="31a8e-p102">Os limites de controle variam de acordo com o cenário. Por exemplo, se você estiver executando um grande volume de gravações, a possibilidade de limitação é mais alta do que se você estiver realizando apenas leituras.</span><span class="sxs-lookup"><span data-stu-id="31a8e-p102">Throttling limits vary based on the scenario. For example, if you are performing a large volume of writes, the possibility for throttling is higher than if you are only performing reads.</span></span>

## <a name="what-happens-when-throttling-occurs"></a><span data-ttu-id="31a8e-107">O que acontece quando a limitação ocorre?</span><span class="sxs-lookup"><span data-stu-id="31a8e-107">What happens when throttling occurs?</span></span>

<span data-ttu-id="31a8e-p103">Quando um limite de controle é excedido, o Microsoft Graph limitas quaisquer outras solicitações desse cliente por um período. Quando a limitação acontece, o Microsoft Graph retorna o código de status HTTP 429 (solicitações demais) e as solicitações falham. Um tempo de espera sugerido é retornado no cabeçalho da resposta da solicitação com falha. O comportamento de limitação pode depender do tipo e do número de solicitações. Por exemplo, se você tiver um grande volume de solicitações, todos os tipos de solicitação são limitados. Os limites de controle variam com base no tipo de solicitação. Portanto, você pode encontrar um cenário onde as gravações são limitadas, mas leituras ainda são permitidas.</span><span class="sxs-lookup"><span data-stu-id="31a8e-p103">When a throttling threshold is exceeded, Microsoft Graph limits any further requests from that client for a period of time. When throttling occurs, Microsoft Graph returns HTTP status code 429 (Too many requests), and the requests fail. A suggested wait time is returned in the response header of the failed request. Throttling behavior can depend on the type and number of requests. For example, if you have a high volume of requests, all requests types are throttled. Threshold limits vary based on the request type. Therefore, you could encounter a scenario where writes are throttled but reads are still permitted.</span></span> 

## <a name="common-throttling-scenarios"></a><span data-ttu-id="31a8e-115">Cenários comuns de limitação</span><span class="sxs-lookup"><span data-stu-id="31a8e-115">Common throttling scenarios</span></span>

<span data-ttu-id="31a8e-116">As causas mais comuns de limitação dos clientes incluem:</span><span class="sxs-lookup"><span data-stu-id="31a8e-116">The most common causes of throttling of clients include:</span></span>

* <span data-ttu-id="31a8e-117">Um grande número de solicitações em todos os aplicativos em um locatário.</span><span class="sxs-lookup"><span data-stu-id="31a8e-117">A large number of requests across all applications in a tenant.</span></span>
* <span data-ttu-id="31a8e-118">Um grande número de solicitações de um aplicativo específico entre todos os locatários.</span><span class="sxs-lookup"><span data-stu-id="31a8e-118">A large number of requests from a particular application across all tenants.</span></span>

## <a name="best-practices-to-handle-throttling"></a><span data-ttu-id="31a8e-119">Práticas recomendadas para lidar com a limitação</span><span class="sxs-lookup"><span data-stu-id="31a8e-119">Best practices to handle throttling</span></span>

<span data-ttu-id="31a8e-120">Estas são as práticas recomendadas para lidar com a limitação:</span><span class="sxs-lookup"><span data-stu-id="31a8e-120">The following are best practices for handling throttling:</span></span>

* <span data-ttu-id="31a8e-121">Reduza o número de operações por solicitação.</span><span class="sxs-lookup"><span data-stu-id="31a8e-121">Reduce the number of operations per request.</span></span>
* <span data-ttu-id="31a8e-122">Reduza a frequência de chamadas.</span><span class="sxs-lookup"><span data-stu-id="31a8e-122">Reduce the frequency of calls.</span></span>
* <span data-ttu-id="31a8e-123">Evite repetições imediatas, pois todas as solicitações se acumulam em relação a seus limites de uso.</span><span class="sxs-lookup"><span data-stu-id="31a8e-123">Avoid immediate retries, because all requests accrue against your usage limits.</span></span>

<span data-ttu-id="31a8e-124">Quando você implementa a manipulação de erro, use o código de erro HTTP 429 para detectar a limitação.</span><span class="sxs-lookup"><span data-stu-id="31a8e-124">When you implement error handling, use the HTTP error code 429 to detect throttling.</span></span> <span data-ttu-id="31a8e-125">A resposta com falha inclui o campo *Retry-After* no cabeçalho de resposta.</span><span class="sxs-lookup"><span data-stu-id="31a8e-125">The failed response includes the *Retry-After* field in the response header.</span></span> <span data-ttu-id="31a8e-126">Desativar solicitações usando o atraso *Retry-After* é a forma mais rápida de se recuperar da limitação, já que o Microsoft Graph continua a registrar a utilização de recursos enquanto o cliente continua limitado.</span><span class="sxs-lookup"><span data-stu-id="31a8e-126">When you implement error handling, use the HTTP error code 429 to detect throttling. The failed response includes the Retry-After field in the response header. Backing off requests using the *Retry-After* delay is the fastest way to recover from throttling because Microsoft Graph continues to log resource usage while a client is being throttled.</span></span>

1. <span data-ttu-id="31a8e-127">Aguarde o número de segundos especificado no campo *Retry-After*.</span><span class="sxs-lookup"><span data-stu-id="31a8e-127">Wait the number of seconds specified in the *Retry-After* field.</span></span>
2. <span data-ttu-id="31a8e-128">Repita a solicitação.</span><span class="sxs-lookup"><span data-stu-id="31a8e-128">Retry the request.</span></span>
3. <span data-ttu-id="31a8e-p105">Se a solicitação falhar novamente com um código de erro 429, você ainda estará limitado. Continue a usar o atraso Retry-After recomendado e repita a solicitação até obter êxito.</span><span class="sxs-lookup"><span data-stu-id="31a8e-p105">If the request fails again with a 429 error code, you are still being throttled. Continue to use the recommended Retry-After delay and retry the request until it succeeds.</span></span>

<span data-ttu-id="31a8e-131">Atualmente, os seguintes recursos oferecem atualmente um cabeçalho retry-after:</span><span class="sxs-lookup"><span data-stu-id="31a8e-131">The following resources currently provide a retry-after header:</span></span>
- [<span data-ttu-id="31a8e-132">Usuário</span><span class="sxs-lookup"><span data-stu-id="31a8e-132">User</span></span>](../api-reference/v1.0/resources/user.md)
- [<span data-ttu-id="31a8e-133">Foto</span><span class="sxs-lookup"><span data-stu-id="31a8e-133">Photo</span></span>](../api-reference/v1.0/resources/profilephoto.md)
- [<span data-ttu-id="31a8e-134">Email</span><span class="sxs-lookup"><span data-stu-id="31a8e-134">mail</span></span>](../api-reference/v1.0/resources/message.md)
- [<span data-ttu-id="31a8e-135">Calendário (usuários e grupos)</span><span class="sxs-lookup"><span data-stu-id="31a8e-135">Calendar (users and groups)</span></span>](../api-reference/v1.0/resources/event.md)
- [<span data-ttu-id="31a8e-136">Contato</span><span class="sxs-lookup"><span data-stu-id="31a8e-136">Contact</span></span>](../api-reference/v1.0/resources/contact.md)
- [<span data-ttu-id="31a8e-137">Anexo</span><span class="sxs-lookup"><span data-stu-id="31a8e-137">Attachment</span></span>](../api-reference/v1.0/resources/attachment.md)
- [<span data-ttu-id="31a8e-138">Conversas em grupo</span><span class="sxs-lookup"><span data-stu-id="31a8e-138">Group conversations</span></span>](../api-reference/v1.0/resources/conversation.md)
- [<span data-ttu-id="31a8e-139">Pessoas e social</span><span class="sxs-lookup"><span data-stu-id="31a8e-139">People and social</span></span>](../api-reference/beta/resources/social_overview.md)
- [<span data-ttu-id="31a8e-140">Drive (OneDrive)</span><span class="sxs-lookup"><span data-stu-id="31a8e-140">Drive (OneDrive)</span></span>](../api-reference/v1.0/resources/drive.md)

<span data-ttu-id="31a8e-141">Para ter uma discussão mais ampla sobre a limitação no Microsoft Cloud, veja [Padrão de Limitação]((https://msdn.microsoft.com/pt-BR/library/office/dn589798.aspx)).</span><span class="sxs-lookup"><span data-stu-id="31a8e-141">For a broader discussion of throttling on the Microsoft Cloud, see [Throttling Pattern]((https://msdn.microsoft.com/pt-BR/library/office/dn589798.aspx)).</span></span>
