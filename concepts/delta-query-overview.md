---
title: Usar a consulta delta para controlar alterações nos dados do Microsoft Graph
description: A consulta delta permite que aplicativos localizem entidades recém-criadas, atualizadas ou excluídas sem executar uma leitura completa do recurso de destino com cada solicitação. Os aplicativos do Microsoft Graph podem usar consulta delta para sincronizar, com eficiência, alterações com armazenamento de dados local.
author: piotrci
localization_priority: Priority
ms.custom: graphiamtop20
ms.openlocfilehash: 4ea9156f89ac1e979c0f6c83e3b6ae828333fbbd
ms.sourcegitcommit: 2fb178ae78b5ecc47207d2b19d0c5a46e07e0960
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/01/2019
ms.locfileid: "37333343"
---
# <a name="use-delta-query-to-track-changes-in-microsoft-graph-data"></a><span data-ttu-id="6d7e9-104">Usar a consulta delta para controlar alterações nos dados do Microsoft Graph</span><span class="sxs-lookup"><span data-stu-id="6d7e9-104">Use delta query to track changes in Microsoft Graph data</span></span>

<span data-ttu-id="6d7e9-p102">A consulta delta permite que aplicativos localizem entidades recém-criadas, atualizadas ou excluídas sem executar uma leitura completa do recurso de destino com cada solicitação. Os aplicativos do Microsoft Graph podem usar consulta delta para sincronizar, com eficiência, alterações com armazenamento de dados local.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-p102">Delta query enables applications to discover newly created, updated, or deleted entities without performing a full read of the target resource with every request. Microsoft Graph applications can use delta query to efficiently synchronize changes with a local data store.</span></span>

## <a name="use-delta-query-to-track-changes-in-a-resource-collection"></a><span data-ttu-id="6d7e9-107">Usar solicitação delta para rastrear alterações em uma coleção resource</span><span class="sxs-lookup"><span data-stu-id="6d7e9-107">Use delta query to track changes in a resource collection</span></span>

<span data-ttu-id="6d7e9-108">O padrão típico de chamada corresponde ao que segue:</span><span class="sxs-lookup"><span data-stu-id="6d7e9-108">The typical call pattern is as follows:</span></span>

1. <span data-ttu-id="6d7e9-109">O aplicativo começa chamando uma solicitação GET com a função delta no recurso desejado.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-109">The application begins by calling a GET request with the delta function on the desired resource.</span></span>
2. <span data-ttu-id="6d7e9-110">O Microsoft Graph envia uma resposta que contém o recurso solicitado e um [token de estado](#state-tokens).</span><span class="sxs-lookup"><span data-stu-id="6d7e9-110">Microsoft Graph sends a response containing the requested resource and a [state token](#state-tokens).</span></span>

     <span data-ttu-id="6d7e9-p103">a.  Se uma URL `nextLink` é retornada, poderá haver páginas de dados adicionais a serem recuperadas na sessão. O aplicativo continua fazendo solicitações usando a URL `nextLink` para recuperar todas as páginas de dados até que uma URL `deltaLink` seja retornada na resposta.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-p103">a.  If a `nextLink` URL is returned, there may be additional pages of data to be retrieved in the session. The application continues making requests using the `nextLink` URL to retrieve all pages of data until a `deltaLink` URL is returned in the response.</span></span>

     <span data-ttu-id="6d7e9-p104">b.  Se uma URL `deltaLink` é retornada, não há mais nenhum dado sobre o estado do recurso a ser retornado. Em solicitações futuras, o aplicativo usa a URL `deltaLink` para inteirar-se das alterações feitas no recurso.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-p104">b.  If a `deltaLink` URL is returned, there is no more data about the existing state of the resource to be returned. For future requests, the application uses the `deltaLink` URL to learn about changes to the resource.</span></span>

3. <span data-ttu-id="6d7e9-p105">Quando o aplicativo precisa saber das alterações no recurso, ele faz uma nova solicitação usando a URL `deltaLink` recebida na etapa 2. Esta solicitação *pode* ser feita imediatamente após concluir a etapa 2 ou quando o aplicativo verifica as alterações.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-p105">When the application needs to learn about changes to the resource, it makes a new request using the `deltaLink` URL received in step 2. This request *may* be made immediately after completing step 2 or when the application checks for changes.</span></span>
4. <span data-ttu-id="6d7e9-119">O Microsoft Graph retorna uma resposta, descrevendo alterações no recurso desde a solicitação anterior e em uma URL `nextLink` ou uma URL `deltaLink`.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-119">Microsoft Graph returns a response describing changes to the resource since the previous request, and either a `nextLink` URL or a `deltaLink` URL.</span></span>

><span data-ttu-id="6d7e9-120">**Observação:** recursos armazenados no Azure Active Directory (por exemplo, usuários e grupos) dão suporte a cenários do tipo "sincronizar a partir de agora".</span><span class="sxs-lookup"><span data-stu-id="6d7e9-120">**Note:** Resources stored in Azure Active Directory (such as users and groups) support "sync from now" scenarios.</span></span> <span data-ttu-id="6d7e9-121">Isso permite que você ignore as etapas 1 e 2 acima (se você não está interessado em recuperar o estado completo do recurso) e peça para conferir o último `deltaLink` em vez disso.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-121">This allows you to skip steps 1 and 2 above (if you are not interested in retrieving the full state of the resource) and ask for the latest `deltaLink` instead.</span></span> <span data-ttu-id="6d7e9-122">Acrescente `$deltaToken=latest` à função `delta`, e a resposta conterá um `deltaLink` e nenhum dado do recurso.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-122">Append `$deltaToken=latest` to the `delta` function and the response will contain a `deltaLink` and no resource data.</span></span>

### <a name="state-tokens"></a><span data-ttu-id="6d7e9-123">Tokens de estado</span><span class="sxs-lookup"><span data-stu-id="6d7e9-123">State tokens</span></span>

<span data-ttu-id="6d7e9-p107">Um GET de consulta delta sempre inclui uma URL especificada em um cabeçalho de resposta `nextLink` ou `deltaLink`. A URL `nextLink` inclui um _skipToken_ e uma URL `deltaLink` inclui um _deltaToken_.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-p107">A delta query GET response always includes a URL specified in a `nextLink` or `deltaLink` response header. The `nextLink` URL includes a _skipToken_, and a `deltaLink` URL includes a _deltaToken_.</span></span>

<span data-ttu-id="6d7e9-p108">Esses tokens são opacos para o cliente. Os seguintes detalhes são o que você precisa saber sobre eles:</span><span class="sxs-lookup"><span data-stu-id="6d7e9-p108">These tokens are opaque to the client. The following details are what you need to know about them:</span></span>

- <span data-ttu-id="6d7e9-128">Cada token reflete o estado e representa um instantâneo do recurso dessa fase do controle de alterações.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-128">Each token reflects the state and represents a snapshot of the resource in that round of change tracking.</span></span>

- <span data-ttu-id="6d7e9-p109">Os tokens de estado também codificam e incluem outros parâmetros da consulta (como `$select`) especificados na solicitação de consulta delta inicial. Portanto, ele não é necessário repeti-los em solicitações de consulta delta subsequentes.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-p109">The state tokens also encode and include other query parameters (such as `$select`) specified in the initial delta query request. Therefore, it's not required to repeat them in subsequent delta query requests.</span></span>

- <span data-ttu-id="6d7e9-131">Ao realizar a consulta delta, você pode copiar e aplicar a URL `nextLink` ou `deltaLink` à próxima chamada de função **delta** sem precisar inspecionar o conteúdo da URL, incluindo seu token de estado.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-131">When carrying out delta query, you can copy and apply the `nextLink` or `deltaLink` URL to the next **delta** function call without having to inspect the contents of the URL, including its state token.</span></span>

### <a name="optional-query-parameters"></a><span data-ttu-id="6d7e9-132">Parâmetros de consulta opcionais</span><span class="sxs-lookup"><span data-stu-id="6d7e9-132">Optional query parameters</span></span>

<span data-ttu-id="6d7e9-p110">Se um cliente usa um parâmetro de consulta, ele deve ser especificado na solicitação inicial. O Microsoft Graph codifica automaticamente o parâmetro especificado em `nextLink` ou `deltaLink` fornecidos na resposta. O aplicativo de chamada só precisa especificar os parâmetros de consulta desejados uma vez antecipados. O Microsoft Graph adiciona os parâmetros especificados automaticamente para todas as solicitações subsequentes.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-p110">If a client uses a query parameter, it must be specified in the initial request. Microsoft Graph automatically encodes the specified parameter into the `nextLink` or `deltaLink` provided in the response. The calling application only needs to specify their desired query parameters once upfront. Microsoft Graph adds the specified parameters automatically for all subsequent requests.</span></span>

<span data-ttu-id="6d7e9-137">Observe o seguinte em relação aos parâmetros de consulta opcionais:</span><span class="sxs-lookup"><span data-stu-id="6d7e9-137">Note the following regarding optional query parameters:</span></span>

- <span data-ttu-id="6d7e9-138">`$orderby` não tem suporte para consultas delta.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-138">`$orderby` is not a supported for delta queries.</span></span>
     - <span data-ttu-id="6d7e9-139">Não assuma que uma sequência específica das respostas tenha retornado de uma consulta delta.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-139">Do not assume a specific sequence of the responses returned from a delta query.</span></span> <span data-ttu-id="6d7e9-140">Suponha que o mesmo item possa aparecer em qualquer lugar na sequência do `nextLink` e leve isso em conta em sua lógica de mesclagem.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-140">Assume that the same group could show up anywhere in the `nextLink` sequence and handle that in your merge logic.</span></span>
- <span data-ttu-id="6d7e9-141">`$top` o não tem suporte para consultas delta, e o número de objetos em cada página pode variar dependendo do tipo de recurso e do tipo de alterações feitas no recurso.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-141">`$top` is not supported for delta queries, and the number of objects in each page can vary depending on the resource type and the type of changes made to the resource.</span></span>

<span data-ttu-id="6d7e9-142">Para usuários e grupos, as restrições a seguir aplicam-se sobre como usar alguns parâmetros de consulta:</span><span class="sxs-lookup"><span data-stu-id="6d7e9-142">For users and groups, the following restrictions apply to using using some query parameters:</span></span>

<span data-ttu-id="6d7e9-143">Para usuários e grupos, existem restrições sobre como usar alguns parâmetros de consulta:</span><span class="sxs-lookup"><span data-stu-id="6d7e9-143">For users and groups, there are restrictions on using some query parameters:</span></span>

- <span data-ttu-id="6d7e9-p112">Se um parâmetro de consulta `$select` for usado, isso indica que o cliente prefere somente controlar alterações nas propriedades ou relações especificadas na instrução `$select`. Se ocorrer uma alteração em uma propriedade que não esteja selecionada, o recurso por meio do qual essa propriedade foi alterada não aparecerá na resposta delta após uma solicitação subsequente.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-p112">If a `$select` query parameter is used, the parameter indicates that the client prefers to only track changes on the properties or relationships specified in the `$select` statement. If a change occurs to a property that is not selected, the resource for which that property changed does not appear in the delta response after a subsequent request.</span></span>
- <span data-ttu-id="6d7e9-146">`$expand` tem suporte apenas para as propriedades de navegação `manager` e `members` para usuários e grupos, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-146">`$expand` is only supported for the `manager` and `members` navigational property for users and groups respectively.</span></span>

- <span data-ttu-id="6d7e9-147">Os filtros de escopo permitem controlar alterações para um ou mais usuários ou grupos específicos por ID de objeto.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-147">Scoping filters allow you to track changes to one or more specific users or groups by objectId.</span></span> <span data-ttu-id="6d7e9-148">Por exemplo, a solicitação a seguir retorna alterações para os grupos que correspondem às IDs especificadas no filtro de consulta.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-148">For example, the following request: $filter= id eq '477e9fc6-5de7-4406-bb2a-7e5c83c9ae5f' or id eq '004d6a07-fe70-4b92-add5-e6e37b8acd8e' returns changes for the groups matching the ids specified in the query filter.</span></span> 

<!-- {
  "blockType": "request",
  "name": "group_delta"
}-->
```http
https://graph.microsoft.com/beta/groups/delta/?$filter=id eq '477e9fc6-5de7-4406-bb2a-7e5c83c9ae5f' or id eq '004d6a07-fe70-4b92-add5-e6e37b8acd8e' 
```

## <a name="resource-representation-in-the-delta-query-response"></a><span data-ttu-id="6d7e9-149">Representação de recurso na resposta da consulta delta</span><span class="sxs-lookup"><span data-stu-id="6d7e9-149">Resource representation in the delta query response</span></span>

- <span data-ttu-id="6d7e9-150">Instâncias de um recurso recém-criadas de um recurso para o qual há suporte são representadas na resposta da consulta delta usando sua representação-padrão.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-150">Newly created instances of a supported resource are represented in the delta query response using their standard representation.</span></span>

- <span data-ttu-id="6d7e9-151">Instâncias atualizadas são representadas por seus **id** com *pelo menos* as propriedades que foram atualizadas, mas podem ser incluídas propriedades adicionais.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-151">Updated instances are represented by their **id** with *at least* the properties that have been updated, but additional properties may be included.</span></span>

- <span data-ttu-id="6d7e9-p114">Relações entre os usuários e os grupos são representadas como anotações na representação do recurso padrão. Essas anotações usam o formato `propertyName@delta`. As anotações são incluídas na resposta da solicitação de consulta inicial delta.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-p114">Relationships on users and groups are represented as annotations on the standard resource representation. These annotations use the format `propertyName@delta`. The annotations are included in the response of the initial delta query request.</span></span>

<span data-ttu-id="6d7e9-p115">As instâncias removidas são representadas por sua **id** e um objeto `@removed`. O objeto `@removed` pode incluir informações adicionais sobre o porquê de a instância ter sido removida. Por exemplo,  "@removed": {"reason": “changed”}.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-p115">Removed instances are represented by their **id** and an `@removed` object. The `@removed` object may include additional information about why the instance was removed. For example,  "@removed": {"reason": “changed”}.</span></span>

<span data-ttu-id="6d7e9-158">Possíveis motivos @removed podem ser *changed* ou *deleted*.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-158">Possible @removed reasons can be *changed* or *deleted*.</span></span>

- <span data-ttu-id="6d7e9-159">*Alterado* indica que o item foi excluído e poderá ser restaurado de [deletedItems](/graph/api/resources/directory?view=graph-rest-beta).</span><span class="sxs-lookup"><span data-stu-id="6d7e9-159">*Changed* indicates the item was deleted and can be restored from [deletedItems](/graph/api/resources/directory?view=graph-rest-beta).</span></span>

- <span data-ttu-id="6d7e9-160">*Deleted* indica que o item foi excluído e não pode ser restaurado.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-160">*Deleted* indicates the item is deleted and cannot be restored.</span></span>

<span data-ttu-id="6d7e9-p116">O objeto `@removed` pode ser retornado na resposta de consulta delta inicial e nas respostas rastreadas (deltaLink). Os clientes que usam solicitações de consulta delta devem ser designados para lidar com esses objetos nas respostas.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-p116">The `@removed` object can be returned in the initial delta query response and in tracked (deltaLink) responses. Clients using delta query requests should be designed to handle these objects in the responses.</span></span>

## <a name="supported-resources"></a><span data-ttu-id="6d7e9-163">Recursos com suporte</span><span class="sxs-lookup"><span data-stu-id="6d7e9-163">Supported resources</span></span>

<span data-ttu-id="6d7e9-164">A consulta delta é compatível atualmente com os seguintes recursos.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-164">Delta query is currently supported for the following resources.</span></span>

| <span data-ttu-id="6d7e9-165">**Coleção de recursos**</span><span class="sxs-lookup"><span data-stu-id="6d7e9-165">**Resource collection**</span></span>                                        | <span data-ttu-id="6d7e9-166">**API**</span><span class="sxs-lookup"><span data-stu-id="6d7e9-166">**API**</span></span>                                                                                                                                                                                |
| :------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <span data-ttu-id="6d7e9-167">Aplicativos (visualização)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-167">Applications (preview)</span></span>                                         | <span data-ttu-id="6d7e9-168">Função [delta](/graph/api/application-delta?view=graph-rest-beta) do recurso [application](/graph/api/resources/application?view=graph-rest-beta) (visualização)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-168">[delta](/graph/api/application-delta?view=graph-rest-beta) function of the [application](/graph/api/resources/application?view=graph-rest-beta) resource (preview)</span></span>                     |
| <span data-ttu-id="6d7e9-169">Classes (pré-visualização)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-169">Classes (preview)</span></span>                                              | <span data-ttu-id="6d7e9-170">função [delta](/graph/api/educationclass-delta?view=graph-rest-beta) do recurso [Class](/graph/api/resources/educationclass?view=graph-rest-beta) (visualização)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-170">[delta](/graph/api/educationclass-delta?view=graph-rest-beta) function of the [servicePrincipal](/graph/api/resources/educationclass?view=graph-rest-beta) resource (preview)</span></span>                     |
| <span data-ttu-id="6d7e9-171">Objetos de diretório (visualização)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-171">Directory objects (preview)</span></span>                                    | <span data-ttu-id="6d7e9-172">Função [delta](/graph/api/directoryobject-delta?view=graph-rest-beta) do recurso [directoryObjects](/graph/api/resources/directoryobject?view=graph-rest-beta) (visualização)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-172">[delta](/graph/api/directoryobject-delta?view=graph-rest-beta) function of the [directoryObjects](/graph/api/resources/directoryobject?view=graph-rest-beta) resource (preview)</span></span>        |
| <span data-ttu-id="6d7e9-173">Funções de diretório</span><span class="sxs-lookup"><span data-stu-id="6d7e9-173">Directory roles</span></span>                                                | <span data-ttu-id="6d7e9-174">Função [delta](/graph/api/directoryrole-delta?view=graph-rest-1.0) do recurso [directoryRole](/graph/api/resources/directoryrole?view=graph-rest-1.0)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-174">[delta](/graph/api/directoryrole-delta?view=graph-rest-1.0) function of the [directoryRole](/graph/api/resources/directoryrole?view=graph-rest-1.0) resource</span></span>                           |
| <span data-ttu-id="6d7e9-175">Itens de unidade\*</span><span class="sxs-lookup"><span data-stu-id="6d7e9-175">Drive items\*</span></span>                                                  | <span data-ttu-id="6d7e9-176">Função [delta](/graph/api/driveitem-delta?view=graph-rest-1.0) do recurso [driveItem](/graph/api/resources/driveitem?view=graph-rest-1.0)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-176">[delta](/graph/api/driveitem-delta?view=graph-rest-1.0) function of the [driveItem](/graph/api/resources/driveitem?view=graph-rest-1.0) resource</span></span>                                       |
| <span data-ttu-id="6d7e9-177">Usuários da educação (pré-visualização)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-177">Education users (preview)</span></span>                                      | <span data-ttu-id="6d7e9-178">Função [delta](/graph/api/educationuser-delta?view=graph-rest-beta) do recurso [usuário da Educação](/graph/api/resources/educationuser?view=graph-rest-beta) (visualização)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-178">[delta](/graph/api/educationuser-delta?view=graph-rest-beta) function of the [user](/graph/api/resources/educationuser?view=graph-rest-beta) resource</span></span>             |
| <span data-ttu-id="6d7e9-179">Eventos em um modo de exibição de calendário (intervalo de datas) do calendário principal</span><span class="sxs-lookup"><span data-stu-id="6d7e9-179">Events in a calendar view (date range) of the primary calendar</span></span> | <span data-ttu-id="6d7e9-180">função [delta](/graph/api/event-delta?view=graph-rest-1.0) do recurso [evento](/graph/api/resources/event?view=graph-rest-1.0)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-180">[delta](/graph/api/event-delta?view=graph-rest-1.0) function of the [event](/graph/api/resources/event?view=graph-rest-1.0) resource</span></span>                                                   |
| <span data-ttu-id="6d7e9-181">Grupos</span><span class="sxs-lookup"><span data-stu-id="6d7e9-181">Groups</span></span>                                                         | <span data-ttu-id="6d7e9-182">Função [delta](/graph/api/group-delta?view=graph-rest-1.0) do recurso [group](/graph/api/resources/group?view=graph-rest-1.0)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-182">[delta](/graph/api/group-delta?view=graph-rest-1.0) function of the [group](/graph/api/resources/group?view=graph-rest-1.0) resource</span></span>                                                   |
| <span data-ttu-id="6d7e9-183">Pastas de email</span><span class="sxs-lookup"><span data-stu-id="6d7e9-183">Mail folders</span></span>                                                   | <span data-ttu-id="6d7e9-184">função [delta](/graph/api/mailfolder-delta?view=graph-rest-1.0) do recurso [mailFolder](/graph/api/resources/mailfolder?view=graph-rest-1.0) </span><span class="sxs-lookup"><span data-stu-id="6d7e9-184">[delta](/graph/api/mailfolder-delta?view=graph-rest-1.0) function of the [mailFolder](/graph/api/resources/mailfolder?view=graph-rest-1.0) resource</span></span>                                    |
| <span data-ttu-id="6d7e9-185">Mensagens de uma pasta</span><span class="sxs-lookup"><span data-stu-id="6d7e9-185">Messages in a folder</span></span>                                           | <span data-ttu-id="6d7e9-186">função [delta](/graph/api/message-delta?view=graph-rest-1.0) do recurso [mensagem](/graph/api/resources/message?view=graph-rest-1.0) </span><span class="sxs-lookup"><span data-stu-id="6d7e9-186">[delta](/graph/api/message-delta?view=graph-rest-1.0) function of the [message](/graph/api/resources/message?view=graph-rest-1.0) resource</span></span>                                             |
| <span data-ttu-id="6d7e9-187">Pastas de contatos pessoais</span><span class="sxs-lookup"><span data-stu-id="6d7e9-187">Personal contact folders</span></span>                                       | <span data-ttu-id="6d7e9-188">função [delta](/graph/api/contactfolder-delta?view=graph-rest-1.0) do recurso [contactFolder](/graph/api/resources/contactfolder?view=graph-rest-1.0)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-188">[delta](/graph/api/contactfolder-delta?view=graph-rest-1.0) function of the [contactFolder](/graph/api/resources/contactfolder?view=graph-rest-1.0) resource</span></span>                           |
| <span data-ttu-id="6d7e9-189">Contatos pessoais em uma pasta</span><span class="sxs-lookup"><span data-stu-id="6d7e9-189">Personal contacts in a folder</span></span>                                  | <span data-ttu-id="6d7e9-190">Função [delta](/graph/api/contact-delta?view=graph-rest-1.0) do recurso [contato](/graph/api/resources/contact?view=graph-rest-1.0)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-190">[delta](/graph/api/contact-delta?view=graph-rest-1.0) function of the [contact](/graph/api/resources/contact?view=graph-rest-1.0) resource</span></span>                                             |
| <span data-ttu-id="6d7e9-191">Escolas (pré-visualização)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-191">Schools (preview)</span></span>                                              | <span data-ttu-id="6d7e9-192">Função [delta](/graph/api/educationschool-delta?view=graph-rest-beta) do recurso [Escola](/graph/api/resources/educationschool?view=graph-rest-beta) (pré-visualização)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-192">[delta](/graph/api/educationschool-delta?view=graph-rest-beta) function of the [servicePrincipal](/graph/api/resources/educationschool?view=graph-rest-beta) resource (preview)</span></span>                  |
| <span data-ttu-id="6d7e9-193">Entidades de serviço (visualização)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-193">Service principals (preview)</span></span>                                   | <span data-ttu-id="6d7e9-194">Função [delta](/graph/api/serviceprincipal-delta?view=graph-rest-beta) do recurso [servicePrincipal](/graph/api/resources/serviceprincipal?view=graph-rest-beta) (visualização)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-194">[delta](/graph/api/serviceprincipal-delta?view=graph-rest-beta) function of the [servicePrincipal](/graph/api/resources/serviceprincipal?view=graph-rest-beta) resource (preview)</span></span>      |
| <span data-ttu-id="6d7e9-195">Usuários</span><span class="sxs-lookup"><span data-stu-id="6d7e9-195">Users</span></span>                                                          | <span data-ttu-id="6d7e9-196">função [delta](/graph/api/user-delta?view=graph-rest-1.0) do recurso [usuário](/graph/api/resources/user?view=graph-rest-1.0)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-196">[delta](/graph/api/user-delta?view=graph-rest-1.0) function of the [user](/graph/api/resources/user?view=graph-rest-1.0) resource</span></span> |
| <span data-ttu-id="6d7e9-197">Itens do Planner\*\* (pré-visualização)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-197">Planner items\*\* (preview)</span></span>                                    | <span data-ttu-id="6d7e9-198">função [delta](/graph/api/planneruser-list-delta?view=graph-rest-beta) de todos os segmentos do recurso [plannerUser](/graph/api/resources/planneruser?view=graph-rest-beta) (visualização)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-198">[delta](/graph/api/planneruser-list-delta?view=graph-rest-beta) function of the all segment of [plannerUser](/graph/api/resources/planneruser?view=graph-rest-beta) resource (preview)</span></span>|
| <span data-ttu-id="6d7e9-199">chatMessages em um canal (visualização)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-199">chatMessages in a channel (preview)</span></span>                            | <span data-ttu-id="6d7e9-200">função [delta](/graph/api/chatmessage-delta?view=graph-rest-beta) do recurso [chatMessage](/graph/api/resources/chatmessage?view=graph-rest-beta)</span><span class="sxs-lookup"><span data-stu-id="6d7e9-200">[delta](/graph/api/chatmessage-delta?view=graph-rest-beta) function of the [contactFolder](/graph/api/resources/chatmessage?view=graph-rest-beta) resource</span></span> |

> <span data-ttu-id="6d7e9-201">\* O padrão de uso dos recursos do OneDrive é semelhante a outros recursos compatíveis com algumas pequenas diferenças de sintaxe.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-201">\* The usage pattern for OneDrive resources is similar to the other supported resources with some minor syntax differences.</span></span> <span data-ttu-id="6d7e9-202">A consulta delta para unidades será atualizada no futuro para serem consistentes com outros tipos de recursos.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-202">Delta query for drives will be updated in the future to be consistent with other resource types.</span></span> <span data-ttu-id="6d7e9-203">Confira mais detalhes sobre a sintaxe atual em [Controlar alterações para uma unidade](/graph/api/driveitem-delta?view=graph-rest-1.0).</span><span class="sxs-lookup"><span data-stu-id="6d7e9-203">For more detail about the current syntax, see [Track changes for a drive](/graph/api/driveitem-delta?view=graph-rest-1.0).</span></span>

> <span data-ttu-id="6d7e9-204">\*\* O padrão de uso dos recursos do Planner é semelhante a outros recursos compatíveis, mas com algumas diferenças.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-204">\*\* The usage pattern for Planner resources is similar to other supported resources with a few differences.</span></span>  <span data-ttu-id="6d7e9-205">Para saber mais, consulte [Controlar alterações para o Planner](/graph/api/planneruser-list-delta?view=graph-rest-beta).</span><span class="sxs-lookup"><span data-stu-id="6d7e9-205">For details, see [Track changes for Planner](/graph/api/planneruser-list-delta?view=graph-rest-beta).</span></span>

### <a name="limitations"></a><span data-ttu-id="6d7e9-206">Limitações</span><span class="sxs-lookup"><span data-stu-id="6d7e9-206">Limitations</span></span>

#### <a name="properties-stored-outside-of-the-main-data-store"></a><span data-ttu-id="6d7e9-207">Propriedades armazenadas fora do repositório de dados principal</span><span class="sxs-lookup"><span data-stu-id="6d7e9-207">Properties stored outside of the main data store</span></span>

<span data-ttu-id="6d7e9-208">Alguns recursos contêm propriedades armazenadas fora do repositório de dados principal do recurso (por exemplo, o recurso de usuário é armazenado no sistema Azure AD, enquanto algumas propriedades, como **skills**, são armazenadas no SharePoint Online).</span><span class="sxs-lookup"><span data-stu-id="6d7e9-208">Some resources contain properties that are stored outside of the main data store for the resource (for example, the user resource is mostly stored in the Azure AD system, while some properties, like **skills**, are stored in SharePoint Online).</span></span> <span data-ttu-id="6d7e9-209">Atualmente, não há suporte para essas propriedades como parte do controle de alterações; uma alteração em uma dessas propriedades não resultará em um objeto aparecendo na resposta de consulta Delta.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-209">Currently, those properties are not supported as part of change tracking; a change to one of those properties will not result in an object showing up in the delta query response.</span></span> <span data-ttu-id="6d7e9-210">Atualmente, apenas as propriedades armazenadas no repositório de dados principal disparam alterações na consulta Delta.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-210">Currently, only the properties stored in the main data store trigger changes in the delta query.</span></span>

<span data-ttu-id="6d7e9-211">Para verificar se uma propriedade pode ser usada na consulta Delta, experimente executar uma operação de `GET` regular na coleção de recursos e selecione a propriedade que você está interessado.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-211">To verify that a property can be used in delta query, try to perform a regular `GET` operation on the resource collection, and select the property you're interested in.</span></span> <span data-ttu-id="6d7e9-212">Por exemplo, você pode usar a propriedade **skills** na coleção de usuários.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-212">For example, you can try the **skills** property on the users collection.</span></span>

```msgraph-interactive
GET https://graph.microsoft.com/v1.0/users/?$select=skills
```

<span data-ttu-id="6d7e9-213">Como a propriedade **skills** é armazenada fora do Azure AD, a seguinte é a resposta.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-213">Because the **skills** property is stored outside of Azure AD, the following is the response.</span></span>

<!-- {
  "blockType": "response",
  "truncated": true,
  "@odata.type": "microsoft.graph.user",
  "isCollection": true
} -->

```http
HTTP/1.1 501 Not Implemented
Content-type: application/json

{
    "error": {
        "code": "NotImplemented",
        "message": "This operation target is not yet supported.",
        "innerError": {
            "request-id": "...",
            "date": "2019-09-20T21:47:50"
        }
    }
}
```

<span data-ttu-id="6d7e9-214">Isso informa que não há suporte para a propriedade **skills** para a consulta Delta no recurso **user**.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-214">This tells you that the **skills** property is not supported for delta query on the **user** resource.</span></span>

#### <a name="navigation-properties"></a><span data-ttu-id="6d7e9-215">Propriedades de navegação</span><span class="sxs-lookup"><span data-stu-id="6d7e9-215">Navigation node properties</span></span>

<span data-ttu-id="6d7e9-216">Não há suporte para propriedades de navegação.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-216">Note: Multi-value properties are not supported.</span></span> <span data-ttu-id="6d7e9-217">Por exemplo, você não pode controlar alterações na coleção de usuários que incluiriam alterações na propriedade **photo**; **photo** é uma propriedade de navegação armazenada fora da entidade do usuário, e as alterações feitas nela não fazem com que o objeto de usuário seja incluído na resposta Delta.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-217">For example, you cannot track changes to the users collection that would include changes to their **photo** property; **photo** is a navigation property stored outside of the user entity, and changes to it do not cause the user object to be included in the delta response.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="6d7e9-218">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="6d7e9-218">Prerequisites</span></span>

<span data-ttu-id="6d7e9-219">As mesmas [permissões](./permissions-reference.md) necessárias para ler um recurso específico também são necessárias para executar a consulta delta nesse recurso.</span><span class="sxs-lookup"><span data-stu-id="6d7e9-219">The same [permissions](./permissions-reference.md) that are required to read a specific resource are also required to perform delta query on that resource.</span></span>

## <a name="delta-query-request-examples"></a><span data-ttu-id="6d7e9-220">Exemplos de solicitação de consulta delta</span><span class="sxs-lookup"><span data-stu-id="6d7e9-220">Delta query request examples</span></span>

- [<span data-ttu-id="6d7e9-221">Obter as alterações incrementais para os eventos em um modo de exibição de calendário</span><span class="sxs-lookup"><span data-stu-id="6d7e9-221">Get incremental changes to events in a calendar view</span></span>](delta-query-events.md)
- [<span data-ttu-id="6d7e9-222">Obter as alterações incrementais para as mensagens em uma pasta</span><span class="sxs-lookup"><span data-stu-id="6d7e9-222">Get incremental changes to messages in a folder</span></span>](./delta-query-messages.md)
- [<span data-ttu-id="6d7e9-223">Obter as alterações incrementais para grupos</span><span class="sxs-lookup"><span data-stu-id="6d7e9-223">Get incremental changes to groups</span></span>](./delta-query-groups.md)
- [<span data-ttu-id="6d7e9-224">Obter as alterações incrementais para usuários</span><span class="sxs-lookup"><span data-stu-id="6d7e9-224">Get incremental changes to users</span></span>](./delta-query-users.md)
