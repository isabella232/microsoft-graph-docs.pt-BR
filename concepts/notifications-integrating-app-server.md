---
title: Criar e enviar uma notificação do serviço de aplicativo
description: 'Configure o serviço de aplicativo para enviar notificações centradas no usuário para vários clientes por meio do Microsoft Graph. '
localization_priority: Priority
ms.prod: notifications
author: merzink
ms.openlocfilehash: d430622d05337cdb00f29de316d5d5cd948e1e05
ms.sourcegitcommit: 62507617292d5ad8598e83a8a253c986d9bac787
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/02/2019
ms.locfileid: "37934348"
---
# <a name="create-and-send-a-notification-from-your-app-service"></a><span data-ttu-id="4f3bc-103">Criar e enviar uma notificação do serviço de aplicativo</span><span class="sxs-lookup"><span data-stu-id="4f3bc-103">Create and send a notification from your app service</span></span>

<span data-ttu-id="4f3bc-104">Você pode criar e enviar uma notificação para um usuário com as APIs do Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="4f3bc-104">You can create and send a notification to a user by using Microsoft Graph APIs.</span></span> <span data-ttu-id="4f3bc-105">As notificações são armazenadas no repositório do serviço de Notificações do Microsoft Graph e enviadas a todos os clientes de aplicativos, em todos os dispositivos em que o usuário de destino está conectado.</span><span class="sxs-lookup"><span data-stu-id="4f3bc-105">The notification is stored in the activity feed store and is sent to all app clients on all devices that the target user is signed in on.</span></span> 

<span data-ttu-id="4f3bc-106">Para enviar uma notificação para o usuário, seu serviço de aplicativo precisará:</span><span class="sxs-lookup"><span data-stu-id="4f3bc-106">In order to send a notification to your user, your application service will:</span></span>
1. <span data-ttu-id="4f3bc-107">[Autenticar](/azure/active-directory/develop/v1-oauth2-client-creds-grant-flow) com a plataforma de identidade da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="4f3bc-107">[Authenticate](/azure/active-directory/develop/v1-oauth2-client-creds-grant-flow) with the Microsoft identity platform.</span></span>
2. <span data-ttu-id="4f3bc-108">Publique uma notificação para a API do Microsoft Graph usando o token de autenticação e direcione o usuário com uma [ID de assinatura de notificação de usuário](/graph/api/notifications-post) que é obtida do seu cliente de aplicativo ao criar uma assinatura.</span><span class="sxs-lookup"><span data-stu-id="4f3bc-108">Post a notification to the Microsoft Graph API using the auth token, and target the user with a [user notification subscription ID](/graph/api/notifications-post) that is obtained from your app client when creating a subscription.</span></span>

> [!NOTE]
> <span data-ttu-id="4f3bc-109">Para uma história de autenticação simplificada, recomendamos usar o novo e aprimorado [SDK de notificação](https://aka.ms/GNSDK) do lado do cliente com uma ID de assinatura de notificação de usuário para receber notificações e gerenciar o estado de notificação.</span><span class="sxs-lookup"><span data-stu-id="4f3bc-109">For a simplified authentication story, we recommend using the new and improved, lightweight [notification SDK](https://aka.ms/GNSDK) on the client-side with a user notification subscription ID to receive notifications and manage notification state.</span></span> <span data-ttu-id="4f3bc-110">Como alternativa, você pode publicar notificações em nome do usuário por meio de permissões delegadas e seu serviço de aplicativo precisará manter tokens de acesso e de atualização, mas isso não é recomendável.</span><span class="sxs-lookup"><span data-stu-id="4f3bc-110">Alternatively, you can  post notifications on behalf of the user via delegated permissions and your app service will need to maintain access tokens and refresh tokens, but this is not recommended.</span></span> <span data-ttu-id="4f3bc-111">Para saber mais sobre o fluxo OAuth 2.0 OBO, confira [Chamadas de serviço a serviço que usam a identidade do usuário delegado no fluxo On-Behalf-Of](https://docs.microsoft.com/azure/active-directory/develop/v1-oauth2-on-behalf-of-flow).</span><span class="sxs-lookup"><span data-stu-id="4f3bc-111">To learn more about OAuth 2.0 OBO flow, see [Service-to-service calls that use delegated user identity in the On-Behalf-Of flow](https://docs.microsoft.com/azure/active-directory/develop/v1-oauth2-on-behalf-of-flow).</span></span> 


## <a name="guaranteed-delivery-on-ios"></a><span data-ttu-id="4f3bc-112">Entrega garantida no iOS</span><span class="sxs-lookup"><span data-stu-id="4f3bc-112">Guaranteed delivery on iOS</span></span>

<span data-ttu-id="4f3bc-113">Em plataformas como o iOS, em certas condições energéticas, a entrega de notificações de dados brutos pode atrasar devido ao processamento em lotes ou pode nem chegar ao ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="4f3bc-113">On platforms like iOS, under certain power conditions, raw data notifications might be delayed in delivery due to batching, or not reach the target endpoint at all.</span></span> <span data-ttu-id="4f3bc-114">Para notificações com alta prioridade entregues a usuários no iOS, a plataforma de notificações do Microsoft Graph permite especificar uma opção de "fallback" de notificação do sistema "raw-to-visual" que envia automaticamente uma notificação do sistema visual para o dispositivo iOS de destino, garantindo que os usuários sejam notificados praticamente em tempo real.</span><span class="sxs-lookup"><span data-stu-id="4f3bc-114">For high-priority notifications being delivered to users on iOS, the Microsoft Graph notifications platform allows you to specify a raw-to-visual toast notification "fallback" option that automatically sends a visual toast notification to the target iOS device, thereby ensuring your user gets notified near real-time.</span></span> <span data-ttu-id="4f3bc-115">Para saber como aproveitar as opções de fallback, confira o [recurso de notificação](/graph/api/resources/projectrome-notification.md).</span><span class="sxs-lookup"><span data-stu-id="4f3bc-115">To learn how to leverage fallback options, please see the [notification resource](/graph/api/resources/projectrome-notification.md).</span></span>  

## <a name="getting-started"></a><span data-ttu-id="4f3bc-116">Introdução</span><span class="sxs-lookup"><span data-stu-id="4f3bc-116">Getting started</span></span>
<span data-ttu-id="4f3bc-117">Para saber como o seu serviço de aplicativo pode começar a enviar notificações aos seus usuários, confira [notificação](/graph/api/resources/projectrome-notification) e o nosso [Exemplo do serviço de aplicativo](https://aka.ms/gnsample-appservice).</span><span class="sxs-lookup"><span data-stu-id="4f3bc-117">To learn how your app service can start sending notifications to your users, see [notification](/graph/api/resources/projectrome-notification) and our [App Service sample](https://aka.ms/gnsample-appservice).</span></span>
